<div class="chat-page">

  <!-- HEADER -->
  <header class="chat-header">
    <h1 class="chat-title">RISOFLORðŸŒ±AI</h1>

    <button class="menu-btn" (click)="openCloseMenu()">
      <i class="bi" [ngClass]="menuAberto ? 'bi-x-lg' : 'bi-list'"></i>
    </button>
  </header>

  <!-- CHAT BODY -->
  <main class="chat-body">

    <!-- Mensagem inicial -->
    <div *ngIf="historico.length === 0" class="chat-empty">
      <h3>Em que posso ajudar?</h3>
    </div>

    <!-- HistÃ³rico -->
    <div class="chat-messages">
      <div *ngFor="let msg of historico" class="message" [class.user]="msg.role === 'user'" [class.assistant]="msg.role === 'assistant'">
        <p class="bubble">{{ msg.content }}</p>
      </div>
    </div>

  </main>

  <!-- INPUT -->
  <footer class="chat-input-area">
    <textarea [(ngModel)]="mensagem" placeholder="Digite sua mensagem..." rows="1" class="chat-input" (keydown)="keypressEnter($event)"></textarea>

    <button class="send-btn" (click)="enviarMensagem()" [disabled]="mensagem.trim() === ''">
      <i class="bi bi-send-fill"></i>
    </button>
  </footer>

  <!-- LOADING -->
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="spinner"></div>
  </div>

</div>